<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>NMEA183toshp.py - Μετατροπή αρχείου ΝΜΕΑ183 σε shapefile - Λεωνίδας Λιάκος - Γεωγράφος. Leonidas Liakos - Geographer</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://geographer.gr/nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile/">

        <meta name="author" content="Leonidas Liakos" />
        <meta name="keywords" content="gps,nmea183,ogr,python" />
        <meta name="description" content="Tο εργαλείο NMEA183toshp.py έχει σαν σκοπό την μετατροπή καταγεγραμμένων συντεταγμένων από το πρότυπο ΝΜΕΑ183 σε αρχείο shapefile. Στον χρήστη δίνεται η δυνατότητα να εξάγει το αρχειο σε μορφή shapefile επιλέγοντας τον τύπο της γεωμετρίας (γραμμική ή σημειακή) καθώς και το γεωγραφικό σύστημα αναφοράς (WGS84 ή ΕΓΣΑ’87). Το παρόν …" />

        <meta property="og:site_name" content="Λεωνίδας Λιάκος - Γεωγράφος. Leonidas Liakos - Geographer" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="NMEA183toshp.py - Μετατροπή αρχείου ΝΜΕΑ183 σε shapefile"/>
        <meta property="og:url" content="https://geographer.gr/nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile/"/>
        <meta property="og:description" content="Tο εργαλείο NMEA183toshp.py έχει σαν σκοπό την μετατροπή καταγεγραμμένων συντεταγμένων από το πρότυπο ΝΜΕΑ183 σε αρχείο shapefile. Στον χρήστη δίνεται η δυνατότητα να εξάγει το αρχειο σε μορφή shapefile επιλέγοντας τον τύπο της γεωμετρίας (γραμμική ή σημειακή) καθώς και το γεωγραφικό σύστημα αναφοράς (WGS84 ή ΕΓΣΑ’87). Το παρόν …"/>
        <meta property="article:published_time" content="2009-07-07" />
            <meta property="article:section" content="GIS" />
            <meta property="article:tag" content="gps" />
            <meta property="article:tag" content="nmea183" />
            <meta property="article:tag" content="ogr" />
            <meta property="article:tag" content="python" />
            <meta property="article:author" content="Leonidas Liakos" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://geographer.gr/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="https://geographer.gr/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://geographer.gr/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="https://geographer.gr/theme/css/style.css" type="text/css"/>

        <link href="https://geographer.gr/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Λεωνίδας Λιάκος - Γεωγράφος. Leonidas Liakos - Geographer ATOM Feed"/>

        <link href="https://geographer.gr/feeds/gis.atom.xml" type="application/atom+xml" rel="alternate"
              title="Λεωνίδας Λιάκος - Γεωγράφος. Leonidas Liakos - Geographer GIS ATOM Feed"/>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JBQR7NZ4PE"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', G-JBQR7NZ4PE);
    </script>
    <!-- End Google Analytics Code -->
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','');</script>
    <!-- End Google Tag Manager -->

</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://geographer.gr/" class="navbar-brand">
Λεωνίδας Λιάκος - Γεωγράφος. Leonidas Liakos - Geographer            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://geographer.gr/about-me/">
                             About me
                          </a></li>
                         <li><a href="https://geographer.gr/pages/contact-greek.html">
                             Επικοινωνία
                          </a></li>
                         <li><a href="https://geographer.gr/οι-χάρτες-μου/">
                             Οι χάρτες μου
                          </a></li>
                        <li >
                            <a href="https://geographer.gr/category/demosieuseis.html">Δημοσιεύσεις</a>
                        </li>
                        <li class="active">
                            <a href="https://geographer.gr/category/gis.html">Gis</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<style>
	#banner{
	    background-image:url("https://geographer.gr/../extra/header_left_bg.png");
	}
</style>

<div id="banner">
	<div class="container">
<!-- 		<div class="copy">
			<h1>Λεωνίδας Λιάκος - Γεωγράφος. Leonidas Liakos - Geographer</h1>
				<p class="intro">This is my subtitle</p>
		</div>
 -->	</div>
</div><!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <ol class="breadcrumb">
                <li><a href="https://geographer.gr" title="Λεωνίδας Λιάκος - Γεωγράφος. Leonidas Liakos - Geographer"><i class="fa fa-home fa-lg"></i></a></li>
                <li><a href="https://geographer.gr/category/gis.html" title="GIS">GIS</a></li>
                <li class="active">NMEA183toshp.py - Μετατροπή αρχείου ΝΜΕΑ183 σε shapefile</li>
            </ol>


<section>
  <p id="post-share-links">
    <b>Share on:</b>
    <a href="https://sharetodiaspora.github.io/?title=NMEA183toshp.py%20-%20%CE%9C%CE%B5%CF%84%CE%B1%CF%84%CF%81%CE%BF%CF%80%CE%AE%20%CE%B1%CF%81%CF%87%CE%B5%CE%AF%CE%BF%CF%85%20%CE%9D%CE%9C%CE%95%CE%91183%20%CF%83%CE%B5%20shapefile&url=https%3A//geographer.gr/nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile/" title="Share on Diaspora">Diaspora*</a>
    ❄
    <a href="https://twitter.com/intent/tweet?text=NMEA183toshp.py%20-%20%CE%9C%CE%B5%CF%84%CE%B1%CF%84%CF%81%CE%BF%CF%80%CE%AE%20%CE%B1%CF%81%CF%87%CE%B5%CE%AF%CE%BF%CF%85%20%CE%9D%CE%9C%CE%95%CE%91183%20%CF%83%CE%B5%20shapefile&url=https%3A//geographer.gr/nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile/&hashtags=gps,nmea183,ogr,python" title="Share on Twitter">Twitter</a>
    ❄
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//geographer.gr/nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile/" title="Share on Facebook">Facebook</a>
    ❄
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A//geographer.gr/nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile/&title=NMEA183toshp.py%20-%20%CE%9C%CE%B5%CF%84%CE%B1%CF%84%CF%81%CE%BF%CF%80%CE%AE%20%CE%B1%CF%81%CF%87%CE%B5%CE%AF%CE%BF%CF%85%20%CE%9D%CE%9C%CE%95%CE%91183%20%CF%83%CE%B5%20shapefile&summary=T%CE%BF%20%CE%B5%CF%81%CE%B3%CE%B1%CE%BB%CE%B5%CE%AF%CE%BF%20NMEA183toshp.py%20%CE%AD%CF%87%CE%B5%CE%B9%20%CF%83%CE%B1%CE%BD%20%CF%83%CE%BA%CE%BF%CF%80%CF%8C%20%CF%84%CE%B7%CE%BD%20%CE%BC%CE%B5%CF%84%CE%B1%CF%84%CF%81%CE%BF%CF%80%CE%AE%0A%CE%BA%CE%B1%CF%84%CE%B1%CE%B3%CE%B5%CE%B3%CF%81%CE%B1%CE%BC%CE%BC%CE%AD%CE%BD%CF%89%CE%BD%20%CF%83%CF%85%CE%BD%CF%84%CE%B5%CF%84%CE%B1%CE%B3%CE%BC%CE%AD%CE%BD%CF%89%CE%BD%20%CE%B1%CF%80%CF%8C%20%CF%84%CE%BF%20%CF%80%CF%81%CF%8C%CF%84%CF%85%CF%80%CE%BF%20%CE%9D%CE%9C%CE%95%CE%91183%20%CF%83%CE%B5%20%CE%B1%CF%81%CF%87%CE%B5%CE%AF%CE%BF%20shapefile.%0A%CE%A3%CF%84%CE%BF%CE%BD%20%CF%87%CF%81%CE%AE%CF%83%CF%84%CE%B7%20%CE%B4%CE%AF%CE%BD%CE%B5%CF%84%CE%B1%CE%B9%20%CE%B7%20%CE%B4%CF%85%CE%BD%CE%B1%CF%84%CF%8C%CF%84%CE%B7%CF%84%CE%B1%20%CE%BD%CE%B1%20%CE%B5%CE%BE%CE%AC%CE%B3%CE%B5%CE%B9%20%CF%84%CE%BF%20%CE%B1%CF%81%CF%87%CE%B5%CE%B9%CE%BF%20%CF%83%CE%B5%20%CE%BC%CE%BF%CF%81%CF%86%CE%AE%0Ashapefile%20%CE%B5%CF%80%CE%B9%CE%BB%CE%AD%CE%B3%CE%BF%CE%BD%CF%84%CE%B1%CF%82%20%CF%84%CE%BF%CE%BD%20%CF%84%CF%8D%CF%80%CE%BF%20%CF%84%CE%B7%CF%82%20%CE%B3%CE%B5%CF%89%CE%BC%CE%B5%CF%84%CF%81%CE%AF%CE%B1%CF%82%20%28%CE%B3%CF%81%CE%B1%CE%BC%CE%BC%CE%B9%CE%BA%CE%AE%20%CE%AE%20%CF%83%CE%B7%CE%BC%CE%B5%CE%B9%CE%B1%CE%BA%CE%AE%29%0A%CE%BA%CE%B1%CE%B8%CF%8E%CF%82%20%CE%BA%CE%B1%CE%B9%20%CF%84%CE%BF%20%CE%B3%CE%B5%CF%89%CE%B3%CF%81%CE%B1%CF%86%CE%B9%CE%BA%CF%8C%20%CF%83%CF%8D%CF%83%CF%84%CE%B7%CE%BC%CE%B1%20%CE%B1%CE%BD%CE%B1%CF%86%CE%BF%CF%81%CE%AC%CF%82%20%28WGS84%20%CE%AE%20%CE%95%CE%93%CE%A3%CE%91%E2%80%9987%29.%0A%CE%A4%CE%BF%20%CF%80%CE%B1%CF%81%CF%8C%CE%BD%20%E2%80%A6&source=https%3A//geographer.gr/nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile/" title="Share on LinkedIn">LinkedIn</a>
    ❄
    <a href="https://news.ycombinator.com/submitlink?t=NMEA183toshp.py%20-%20%CE%9C%CE%B5%CF%84%CE%B1%CF%84%CF%81%CE%BF%CF%80%CE%AE%20%CE%B1%CF%81%CF%87%CE%B5%CE%AF%CE%BF%CF%85%20%CE%9D%CE%9C%CE%95%CE%91183%20%CF%83%CE%B5%20shapefile&u=https%3A//geographer.gr/nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile/" title="Share on HackerNews">HackerNews</a>
    ❄
    <a href="mailto:?subject=NMEA183toshp.py%20-%20%CE%9C%CE%B5%CF%84%CE%B1%CF%84%CF%81%CE%BF%CF%80%CE%AE%20%CE%B1%CF%81%CF%87%CE%B5%CE%AF%CE%BF%CF%85%20%CE%9D%CE%9C%CE%95%CE%91183%20%CF%83%CE%B5%20shapefile&amp;body=https%3A//geographer.gr/nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile/" title="Share via Email">Email</a>
    ❄
    <a href="https://www.reddit.com/submit?url=https%3A//geographer.gr/nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile/&title=NMEA183toshp.py%20-%20%CE%9C%CE%B5%CF%84%CE%B1%CF%84%CF%81%CE%BF%CF%80%CE%AE%20%CE%B1%CF%81%CF%87%CE%B5%CE%AF%CE%BF%CF%85%20%CE%9D%CE%9C%CE%95%CE%91183%20%CF%83%CE%B5%20shapefile" title="Share via Reddit">Reddit</a>
  </p>
</section>

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://geographer.gr/nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile/"
                       rel="bookmark"
                       title="Permalink to NMEA183toshp.py - Μετατροπή αρχείου ΝΜΕΑ183 σε shapefile">
                        NMEA183toshp.py - Μετατροπή αρχείου ΝΜΕΑ183 σε shapefile
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2009-07-07T00:10:00+03:00"> Τρι 07 Ιουλίου 2009</time>
    </span>



        <span class="label label-default">Category</span>
        <a href="https://geographer.gr/category/gis.html">GIS</a>


<span class="label label-default">Tags</span>
	<a href="https://geographer.gr/tag/gps.html">gps</a>
        /
	<a href="https://geographer.gr/tag/nmea183.html">nmea183</a>
        /
	<a href="https://geographer.gr/tag/ogr.html">ogr</a>
        /
	<a href="https://geographer.gr/tag/python.html">python</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p><img src="https://geographer.gr/images/nmea.png"/></p>
<p>Tο εργαλείο NMEA183toshp.py έχει σαν σκοπό την μετατροπή
καταγεγραμμένων συντεταγμένων από το πρότυπο <a href="https://en.wikipedia.org/wiki/NMEA_0183">ΝΜΕΑ183</a> σε αρχείο <a href="https://en.wikipedia.org/wiki/Shapefile#Spatial_representation">shapefile</a>.</p>
<p>Στον χρήστη δίνεται η δυνατότητα να εξάγει το αρχειο σε μορφή
shapefile επιλέγοντας τον τύπο της γεωμετρίας (γραμμική ή σημειακή)
καθώς και το γεωγραφικό σύστημα αναφοράς (WGS84 ή ΕΓΣΑ’87).</p>
<p>Το παρόν εργαλείο αποτελεί παραμετροποίηση και επέκταση από το arcgis
script <a href="http://arcscripts.esri.com/details.asp?dbid=13990">gps2shp</a> του
<a href="http://dstath.users.uth.gr/">Δημήτρη Σταθάκη</a>.</p>
<p>Είναι γραμμένο με την γλώσσα Python και το γραφικό του περιβάλλον
στηρίζεται στην πλατφόρμα pyQt4. Η περαιτέρω επεξεργασία για την
μετατροπή των δεδομένων σε shapefile βασίζεται στην βιβλιοθήκη <a href="https://wiki.osgeo.org/wiki/OSGeo_Python_Library">osgeo για την
python</a>. Το πρόγραμμα έχει δοκιμαστεί στο λειτουργικό σύστημα Ubuntu
9.04</p>
<p>Download <a href="https://geographer.gr/extra/NMEA183toshp.py">NMEA183toshp.py</a></p>
<p>Αφού κατεβάσετε το αρχείο πρέπει να το ορίσετε σαν εκτελέσιμο:</p>
<pre><code> chmod +x NMEA183toshp.py</code></pre>
<p>Στην συνέχεια με διπλό κλικ στο αρχείο NMEA183toshp.py θα εμφανιστεί
το γραφικό περιβάλλον του προγράμματος.</p>
<p><img src="https://geographer.gr/images/nmea2shp.jpg"/></p>
<p>Παρακάτω διατίθεται ο κώδικας του προγράμματος:</p>
<pre><code>#!/usr/bin/python
# -*- coding: utf-8 -*-
 
import sys,  os,  string
from osgeo import ogr
from osgeo import osr
from PyQt4 import QtGui, QtCore
 
class Ui_MainWindow(object):
def setupUi(self, MainWindow):
MainWindow.setObjectName("MainWindow")
MainWindow.resize(800, 600)
self.centralwidget = QtGui.QWidget(MainWindow)
self.centralwidget.setObjectName("centralwidget")
self.groupBox = QtGui.QGroupBox(self.centralwidget)
self.groupBox.setGeometry(QtCore.QRect(30, 20, 741, 331))
self.groupBox.setObjectName("groupBox")
self.textBrowser = QtGui.QTextBrowser(self.groupBox)
self.textBrowser.setGeometry(QtCore.QRect(20, 60, 701, 251))
self.textBrowser.setFrameShape(QtGui.QFrame.Box)
self.textBrowser.setFrameShadow(QtGui.QFrame.Plain)
self.textBrowser.setHorizontalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
self.textBrowser.setObjectName("textBrowser")
self.widget = QtGui.QWidget(self.groupBox)
self.widget.setGeometry(QtCore.QRect(20, 18, 701, 41))
self.widget.setObjectName("widget")
self.gridLayout = QtGui.QGridLayout(self.widget)
self.gridLayout.setObjectName("gridLayout")
self.label = QtGui.QLabel(self.widget)
self.label.setObjectName("label")
self.gridLayout.addWidget(self.label, 0, 0, 1, 1)
self.lineEdit = QtGui.QLineEdit(self.widget)
self.lineEdit.setObjectName("lineEdit")
self.gridLayout.addWidget(self.lineEdit, 0, 1, 1, 1)
self.pushButton = QtGui.QPushButton(self.widget)
self.pushButton.setObjectName("pushButton")
self.gridLayout.addWidget(self.pushButton, 0, 2, 1, 1)
self.groupBox_2 = QtGui.QGroupBox(self.centralwidget)
self.groupBox_2.setGeometry(QtCore.QRect(30, 360, 741, 161))
self.groupBox_2.setObjectName("groupBox_2")
self.layoutWidget = QtGui.QWidget(self.groupBox_2)
self.layoutWidget.setGeometry(QtCore.QRect(20, 20, 701, 41))
self.layoutWidget.setObjectName("layoutWidget")
self.gridLayout_2 = QtGui.QGridLayout(self.layoutWidget)
self.gridLayout_2.setObjectName("gridLayout_2")
self.label_2 = QtGui.QLabel(self.layoutWidget)
self.label_2.setObjectName("label_2")
self.gridLayout_2.addWidget(self.label_2, 0, 0, 1, 1)
self.lineEdit_2 = QtGui.QLineEdit(self.layoutWidget)
self.lineEdit_2.setObjectName("lineEdit_2")
self.gridLayout_2.addWidget(self.lineEdit_2, 0, 1, 1, 1)
self.pushButton_2 = QtGui.QPushButton(self.layoutWidget)
self.pushButton_2.setObjectName("pushButton_2")
self.gridLayout_2.addWidget(self.pushButton_2, 0, 2, 1, 1)
self.groupBox_3 = QtGui.QGroupBox(self.groupBox_2)
self.groupBox_3.setGeometry(QtCore.QRect(20, 60, 151, 80))
self.groupBox_3.setObjectName("groupBox_3")
self.radioButton = QtGui.QRadioButton(self.groupBox_3)
self.radioButton.setGeometry(QtCore.QRect(10, 20, 141, 22))
self.radioButton.setObjectName("radioButton")
self.radioButton.setChecked(True)
self.radioButton_2 = QtGui.QRadioButton(self.groupBox_3)
self.radioButton_2.setGeometry(QtCore.QRect(10, 50, 131, 22))
self.radioButton_2.setObjectName("radioButton_2")
self.groupBox_4 = QtGui.QGroupBox(self.groupBox_2)
self.groupBox_4.setGeometry(QtCore.QRect(190, 60, 211, 80))
self.groupBox_4.setObjectName("groupBox_4")
self.comboBox = QtGui.QComboBox(self.groupBox_4)
self.comboBox.setGeometry(QtCore.QRect(10, 30, 121, 22))
self.comboBox.setObjectName("comboBox")
self.comboBox.addItem(QtCore.QString())
self.comboBox.addItem(QtCore.QString())
self.pushButton_3 = QtGui.QPushButton(self.centralwidget)
self.pushButton_3.setGeometry(QtCore.QRect(310, 540, 80, 27))
self.pushButton_3.setObjectName("pushButton_3")
MainWindow.setCentralWidget(self.centralwidget)
self.statusbar = QtGui.QStatusBar(MainWindow)
self.statusbar.setObjectName("statusbar")
MainWindow.setStatusBar(self.statusbar)
 
self.retranslateUi(MainWindow)
QtCore.QMetaObject.connectSlotsByName(MainWindow)
 
QtCore.QObject.connect(self.pushButton, QtCore.SIGNAL("clicked()"), self.showDialog)
QtCore.QObject.connect(self.pushButton_2, QtCore.SIGNAL("clicked()"), self.saveDialog)
QtCore.QObject.connect(self.pushButton_3, QtCore.SIGNAL("clicked()"), self.Convert)
QtCore.QObject.connect(self.comboBox, QtCore.SIGNAL("currentIndexChanged(int)"), self.GetSRS)
def Convert(self):
try:
# path &amp;amp; name of the GPS log file
gpsFile = self.Openfilename.toLocal8Bit()
print gpsFile
print type(gpsFile)
 
# output folder &amp;amp; SHAPEFILE name
outShapeFile = self.shp
drv = ogr.GetDriverByName('ESRI Shapefile')
if os.path.exists(str(outShapeFile)):
 
drv.DeleteDataSource(str(outShapeFile))
print ("shapefile deleted")
print outShapeFile
print type(outShapeFile)
t_srs = osr.SpatialReference()
 
if self.comboBox.currentText()=='Greek Grid':
print "Greek Grid"
t_srs.ImportFromProj4("+proj=tmerc +lon_0=24 +k=.9996 +x_0=500000 +towgs84=-199.72,74.03,246.02+ellps=GRS80")
 
t_srs.SetFromUserInput('EPSG:2100') #Greek Grid
else:
t_srs.SetFromUserInput('WGS84')
print "WGS84"
print str(outShapeFile)
ds = drv.CreateDataSource(str(outShapeFile))
if  self.radioButton.isChecked():
layer = ds.CreateLayer(ds.GetName(), geom_type = ogr.wkbPoint, srs = t_srs)
layer.CreateField(ogr.FieldDefn('TimeStamp', ogr.OFTInteger))
layer.CreateField(ogr.FieldDefn('quality', ogr.OFTInteger))
layer.CreateField(ogr.FieldDefn('NumbSats', ogr.OFTInteger))
layer.CreateField(ogr.FieldDefn('HDOP', ogr.OFTReal))
layer.CreateField(ogr.FieldDefn('Altitude', ogr.OFTReal))
else:
print('line shp is created')
layer = ds.CreateLayer(ds.GetName(), geom_type = ogr.wkbLineString, srs = t_srs)
line = ogr.Geometry(ogr.wkbLineString)
 
# initialize variables.
numberOfLines = 0
numberOfSkippedLines = 0
gpsLine = ""
coord = ""
 
# open GPS log file to read.
f=open(str(gpsFile), 'r')
while gpsLine.isalnum:
gpsLine = f.readline()
if not gpsLine: break
numberOfLines = numberOfLines + 1
linesp = gpsLine.split(',',15)
 
if linesp[0]=='$GPGGA':
 
# convert Latitude from DDMM.MMM (variable no of digits) to DD.DDD
latDDMM = linesp[2].split('.',2)
latLen = len(latDDMM[0]) - 2
 
if len(latDDMM) == 1:
latDDDD = int(latDDMM[0][0:latLen]) + (float(latDDMM[0][-2:]) / 60)
else:
latDDDD = int(latDDMM[0][0:latLen]) + (float(latDDMM[0][-2:] + "." + latDDMM[1]) / 60)
 
# convert Longitude from DDMM.MMM (variable no of digits) to DD.DDD
longDDMM = linesp[4].split('.',2)
longLen = len(longDDMM[0]) - 2
 
if len(longDDMM) == 1:
longDDDD = int(longDDMM[0][0:longLen]) + (float(longDDMM[0][-2:]) / 60)
else:
longDDDD = int(longDDMM[0][0:longLen]) + (float(longDDMM[0][-2:] + "." + longDDMM[1]) / 60)
 
# Convert to negative for West and South coord.
if linesp[3] == "S":
longDDDD = longDDDD * (-1)
if linesp[5] == "W":
latDDDD = latDDDD * (-1)
 
# a simple test to skip corrupted NMEA sentences.
if latDDDD &amp;lt;= -90 or latDDDD &amp;gt;= 90:
numberOfSkippedLines = numberOfSkippedLines + 1
break
if longDDDD &amp;lt;= -180 or longDDDD &amp;gt;= 180:
numberOfSkippedLines = numberOfSkippedLines + 1
break
 
if  self.radioButton.isChecked():
 
print longDDDD, latDDDD
geom = ogr.Geometry(type=ogr.wkbPoint)
geom.AddPoint(longDDDD,latDDDD)
print geom.GetX(), geom.GetY()
 
if self.comboBox.currentText()=='Greek Grid':
sourceSR = osr.SpatialReference()
sourceSR.SetFromUserInput('WGS84')
targetSR = osr.SpatialReference()
targetSR.ImportFromProj4("+proj=tmerc +lon_0=24 +k=.9996 +x_0=500000 +towgs84=-199.72,74.03,246.02+ellps=GRS80")
 
coordTrans = osr.CoordinateTransformation(sourceSR, targetSR)
geom.Transform(coordTrans)
print geom.GetX(), geom.GetY()
 
feat = ogr.Feature(feature_def=layer.GetLayerDefn())
feat.SetGeometry(geom)
feat.SetFID(int(numberOfLines))
 
#change time stamp format to DDDHHMMSS. Looks better!
TStamp = linesp[1].split('.',2)
feat.SetField('TimeStamp', int(string.zfill(TStamp[1], 3) + string.zfill(TStamp[0], 6)))
feat.SetField('quality', int(linesp[6]))
feat.SetField('NumbSats', float(linesp[7]))
if not linesp[8]:
feat.SetField('HDOP', 0)
else:
feat.SetField('HDOP', float(linesp[8]))
feat.SetField('Altitude', float(linesp[9]))
layer.CreateFeature(feat)
else:
print('Add point in line ' + str(longDDDD )+ ','  + str(latDDDD))
line.AddPoint(longDDDD,latDDDD)
 
if  self.radioButton.isChecked():
pass
else:
print line.GetPointCount()
print('line is writen')
feat = ogr.Feature(feature_def=layer.GetLayerDefn())
if self.comboBox.currentText()=='Greek Grid':
sourceSR = osr.SpatialReference()
sourceSR.SetFromUserInput('WGS84')
targetSR = osr.SpatialReference()
targetSR.ImportFromProj4("+proj=tmerc +lon_0=24 +k=.9996 +x_0=500000 +towgs84=-199.72,74.03,246.02+ellps=GRS80")
coordTrans = osr.CoordinateTransformation(sourceSR, targetSR)
line.Transform(coordTrans)
feat.SetGeometry(line)
feat.SetFID(0)
layer.CreateFeature(feat)
 
# Clean up
ds.Destroy()
Done = QtGui.QMessageBox.question(None, u'Ενημέρωση', u'Η μετατροπή ολοκληρώθηκε επιτυχώς', QtGui.QMessageBox.Ok)
except AttributeError:
Error = QtGui.QMessageBox.critical(None, u'Σφάλμα', u'Παρακαλώ ελέγξτε τις διαδρομές των αρχείων', QtGui.QMessageBox.Ok)
#
#
 
def GetSRS(self):
item = self.comboBox.currentText()
print  item
 
def saveDialog(self):
home=os.environ.get('HOME')
self.Savefilename = QtGui.QFileDialog.getSaveFileName(None, u'Αποθήκευση δεδομένων σε αρχείο shapefile',  home,  "Shapefile (*.shp)");
 
if self.Savefilename.toLocal8Bit()=='' :
pass
else:
self.shp=self.Savefilename.toLocal8Bit() + '.shp'
self.lineEdit_2.setText(self.shp)
 
def showDialog(self):
home=os.environ.get('HOME')
 
self.Openfilename = QtGui.QFileDialog.getOpenFileName(None, u'Επιλογή αρχειου NMEA183', home)
 
if self.Openfilename.toLocal8Bit()=='' :
pass
else:
file=open(self.Openfilename.toLocal8Bit())
data = file.read()
self.lineEdit.setText(str(self.Openfilename))
self.textBrowser.setText(data)
file.close
 
def retranslateUi(self, MainWindow):
MainWindow.setWindowTitle(QtGui.QApplication.translate("MainWindow", "Μετατροπή αρχείου NMEA183 σε Shapefile", None, QtGui.QApplication.UnicodeUTF8))
self.groupBox.setTitle(QtGui.QApplication.translate("MainWindow", "Αρχείο NMEA183", None, QtGui.QApplication.UnicodeUTF8))
self.textBrowser.setToolTip(QtGui.QApplication.translate("MainWindow", "Δεδομένα του αρχείου Shapefile", None, QtGui.QApplication.UnicodeUTF8))
self.label.setText(QtGui.QApplication.translate("MainWindow", "Αρχείο:", None, QtGui.QApplication.UnicodeUTF8))
self.lineEdit.setToolTip(QtGui.QApplication.translate("MainWindow", "Παρακαλώ επιλέξτε το αρχείο NMEA183", None, QtGui.QApplication.UnicodeUTF8))
self.pushButton.setText(QtGui.QApplication.translate("MainWindow", "Άνοιγμα", None, QtGui.QApplication.UnicodeUTF8))
self.groupBox_2.setTitle(QtGui.QApplication.translate("MainWindow", "Shapefile", None, QtGui.QApplication.UnicodeUTF8))
self.label_2.setText(QtGui.QApplication.translate("MainWindow", "Αρχείο:", None, QtGui.QApplication.UnicodeUTF8))
self.lineEdit_2.setToolTip(QtGui.QApplication.translate("MainWindow", "Παρακαλώ, αποθηκεύστε την μετατροπή σε ένα νέο αρχείο Shapefile", None, QtGui.QApplication.UnicodeUTF8))
self.pushButton_2.setText(QtGui.QApplication.translate("MainWindow", "Αποθήκευση", None, QtGui.QApplication.UnicodeUTF8))
self.groupBox_3.setTitle(QtGui.QApplication.translate("MainWindow", "Τύπος αρχείου", None, QtGui.QApplication.UnicodeUTF8))
self.radioButton.setText(QtGui.QApplication.translate("MainWindow", "Point", None, QtGui.QApplication.UnicodeUTF8))
self.radioButton_2.setText(QtGui.QApplication.translate("MainWindow", "Line", None, QtGui.QApplication.UnicodeUTF8))
self.groupBox_4.setTitle(QtGui.QApplication.translate("MainWindow", "Γεωγραφικό Σύστημα Αναφοράς", None, QtGui.QApplication.UnicodeUTF8))
self.comboBox.setItemText(0, QtGui.QApplication.translate("MainWindow", "WGS84", None, QtGui.QApplication.UnicodeUTF8))
self.comboBox.setItemText(1, QtGui.QApplication.translate("MainWindow", "Greek Grid", None, QtGui.QApplication.UnicodeUTF8))
self.pushButton_3.setText(QtGui.QApplication.translate("MainWindow", "Μετατροπή", None, QtGui.QApplication.UnicodeUTF8))
app = QtGui.QApplication(sys.argv)
widget = QtGui.QMainWindow()
mywidget = Ui_MainWindow()
mywidget.setupUi( widget )
widget.show()
app.exec_()
</code></pre>
            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'geographer'; // required: replace example with your forum shortname

            var disqus_config = function () {
                this.language = "en";

                        this.page.identifier = '2009-07-07-nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile';
                        this.page.url = 'https://geographer.gr/nmea183toshppy-metatrope-arkheiou-nmea183-se-shapefile/';
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="https://www.linkedin.com/in/leonidasliakos"><i class="fa fa-linkedin-square fa-lg"></i> Linkedin</a></li>
    <li class="list-group-item"><a href="https://twitter.com/leonidasliakos"><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li>
    <li class="list-group-item"><a href="https://github.com/kokkytos"><i class="fa fa-github-square fa-lg"></i> Github</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->

<!-- Sidebar/Categories -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categories</span></h4>
  <ul class="list-group" id="categories">
    <li class="list-group-item">
      <a href="https://geographer.gr/category/demosieuseis.html"><i class="fa fa-folder-open fa-lg"></i>Δημοσιεύσεις</a>
    </li>
    <li class="list-group-item">
      <a href="https://geographer.gr/category/gis.html"><i class="fa fa-folder-open fa-lg"></i>GIS</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Categories -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="https://esdac.jrc.ec.europa.eu/" target="_blank">European Soil Data Centre</a>
    </li>
    <li class="list-group-item">
      <a href="https://geography.aegean.gr/" target="_blank">Τμήμα Γεωγραφία</a>
    </li>
    <li class="list-group-item">
      <a href="https://gislab.gr/" target="_blank">GISlab</a>
    </li>
    <li class="list-group-item">
      <a href="https://geographers.gr/" target="_blank">Ε.ΓΕΩ</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2023 Leonidas Liakos
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://geographer.gr/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://geographer.gr/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://geographer.gr/theme/js/respond.min.js"></script>


<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


    <script src="https://geographer.gr/theme/js/bodypadding.js"></script>
    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'geographer'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->


</body>
</html>